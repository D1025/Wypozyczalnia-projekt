# Application Configuration
spring.application.name=wypozyczalnia
spring.profiles.active=${SPRING_PROFILES_ACTIVE:dev}

# Server Configuration
server.port=${SERVER_PORT:8080}

# Database Configuration
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:wypozyczalnia}}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:${DB_USER:postgres}}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:${DB_PASSWORD:password}}
spring.datasource.driver-class-name=${SPRING_DATASOURCE_DRIVER_CLASS_NAME:org.postgresql.Driver}

# JPA/Hibernate Configuration
spring.jpa.hibernate.ddl-auto=${SPRING_JPA_HIBERNATE_DDL_AUTO:validate}
spring.jpa.show-sql=${SPRING_JPA_SHOW_SQL:true}
spring.jpa.database-platform=${SPRING_JPA_DATABASE_PLATFORM:org.hibernate.dialect.PostgreSQLDialect}
spring.jpa.properties.hibernate.format_sql=true

# Liquibase Configuration
spring.liquibase.change-log=classpath:database/db.changelog-master.yaml

# Keycloak Configuration
keycloak.realm=${KEYCLOAK_REALM:wypozyczalnia}
keycloak.resource=${KEYCLOAK_RESOURCE:wypozyczalnia-app}
keycloak.auth-server-url=${KEYCLOAK_AUTH_SERVER_URL:http://localhost:8086}
keycloak.ssl-required=${KEYCLOAK_SSL_REQUIRED:external}
keycloak.public-client=${KEYCLOAK_PUBLIC_CLIENT:true}
keycloak.verify-token-audience=${KEYCLOAK_VERIFY_TOKEN_AUDIENCE:true}
keycloak.use-resource-role-mappings=${KEYCLOAK_USE_RESOURCE_ROLE_MAPPINGS:true}
keycloak.confidential-port=${KEYCLOAK_CONFIDENTIAL_PORT:0}

# Optional Keycloak client secret (for confidential clients)
keycloak.credentials.secret=${KEYCLOAK_CLIENT_SECRET:}

# Keycloak admin credentials used by backend for user registration
keycloak.admin.username=${KEYCLOAK_ADMIN_USERNAME:${KEYCLOAK_ADMIN:admin}}
keycloak.admin.password=${KEYCLOAK_ADMIN_PASSWORD:${KEYCLOAK_ADMIN_PASSWORD:admin}}

# Admin token is typically obtained from the master realm (where KEYCLOAK_ADMIN user is created)
keycloak.admin.realm=${KEYCLOAK_ADMIN_REALM:master}
# Optional: only if admin-cli is configured as confidential client
keycloak.admin.client-secret=${KEYCLOAK_ADMIN_CLIENT_SECRET:}

# OAuth2 Resource Server
spring.security.oauth2.resourceserver.jwt.issuer-uri=${KEYCLOAK_ISSUER_URI:${keycloak.auth-server-url}/realms/${keycloak.realm}}

# Logging Configuration
logging.level.org.springframework.security=${LOGGING_LEVEL_SECURITY:DEBUG}
logging.level.org.keycloak=${LOGGING_LEVEL_KEYCLOAK:DEBUG}
logging.level.com.projekt.wypozyczalnia=${LOGGING_LEVEL_APP:DEBUG}
